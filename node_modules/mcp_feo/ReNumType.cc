#include "ReNumType.h"

ReNumType::ReNumType(char *pNum, int len)
{
    this->pos = (long *)malloc(sizeof(char *)*4);
    this->posLen = (int *)malloc(sizeof(int)*4);
    for(int i = 0; i < 4; i++)
    {
        this->pos[i] = (long)malloc(sizeof(char)*8);
        printf("%ld\n", this->pos[i]);
        this->posLen[i] = 0;
    }

    int posLen = 0;
    int posIndex = 0;
    //拆解每一位的号码，放入pos对应的位
    for(int i = 0; i < len ; i++)
    {
        char c = pNum[i];
        if(c == '|' || i == len - 1)
        {
            this->posLen[posIndex] = posLen;
            posLen = 0;
            posIndex++;
        }
        else
        {
            char *pos = (char *)this->pos[posIndex];
            pos[posLen] = c;
            posLen++;
        }
    }

    for(int i = 0; i < 4; i++)
    {
        printf("%s\n", (char *)this->pos[i]);
    }
}

ReNumType::~ReNumType()
{
    delete[] this->posLen;
    for(int i = 0; i < 4; i++)
    {
        delete[] (char *)this->pos[i];
    }
    delete[] this->pos;
}